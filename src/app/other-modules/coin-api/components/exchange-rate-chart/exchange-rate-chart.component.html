<app-svg-point-chart
  (pointSelected)="pointSelected($event)"
  [forceUpdate$]="pointChartForceUpdate$"
  [pointChart]="selectedChart?.chart!"
></app-svg-point-chart>

<mat-form-field>
  <input
    type="number"
    matInput
    placeholder="chart points {{ (selectedChart?.chart?.points)!.length }}"
    [formControl]="configPointsCount$"
  />
</mat-form-field>
<mat-slider
  class="mat-form-field slider-container"
  thumbLabel
  tickInterval="750"
  step="5"
  min="10"
  max="100"
  [formControl]="configWidth$"
></mat-slider>

<button mat-mini-fab (click)="isPlaying = !isPlaying" [disabled]="isPlaying">
  <mat-icon>play_circle</mat-icon>
</button>
<button mat-mini-fab (click)="isPlaying = !isPlaying" [disabled]="!isPlaying">
  <mat-icon>pause_circle</mat-icon>
</button>

<mat-slide-toggle [formControl]="configShowHistory$"></mat-slide-toggle>

<div *ngIf="configShowHistory$.value">
  <p class="mat-body">Collected points: {{ ratePairHistory.length }}</p>
  <cdk-virtual-scroll-viewport
    [itemSize]="itemHeight"
    [style.height.px]="itemHeight * itemOnView"
  >
    <div
      [ngClass]="{ 'odd-item': odd, 'even-item': even }"
      [style.height.px]="itemHeight"
      class="viewport-item"
      *cdkVirtualFor="
        let rate of ratePairHistory;
        let index = index;
        let count = count;
        let first = first;
        let last = last;
        let even = even;
        let odd = odd
      "
    >
      <div
        fxLayout
        fxLayoutAlign="space-between"
        [style.height.px]="itemHeight"
      >
        <h4 class="mat-h4">
          {{ index + 1 }} | {{ rate.time | date: "medium" }} |
          <strong>{{ rate.rate }}</strong>
        </h4>
      </div>
    </div>
  </cdk-virtual-scroll-viewport>
</div>
